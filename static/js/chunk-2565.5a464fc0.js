(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-2565"],{Fbt2:function(t,e,n){"use strict";n.r(e);var i=n("P2sY"),s=n.n(i),a=n("rY9o"),l={data:function(){return{list:[{type:"现金券",name:"10元券",expire:["2019-02-03","2019-04-05"],status:"进行中",sended:200,unchecked:120,points:80},{type:"折扣券",name:"1折券",expire:["2019-02-03","2019-04-05"],status:"未开始",sended:200,unchecked:120,points:80},{type:"现金券",name:"10元券",expire:["2019-02-03","2019-04-05"],status:"已过期",sended:200,unchecked:120,points:80}],searchContent:"",dialogVisible:!1,transform:"",ticketDialogVisible:!1,ticketForm:{type:"",name:"",expire:"",status:"未开始",sended:0,unchecked:0,points:0},options:[{value:"现金券",label:"现金券"},{value:"折扣券",label:"折扣券"}]}},created:function(){},methods:{fetchData:function(){var t=this;this.listLoading=!0,Object(a.a)(this.listQuery).then(function(e){t.list=e.data.items,t.listLoading=!1})},start:function(t){var e=this;this.$confirm("是否启用该优惠券？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.status="进行中",e.$message({type:"success",message:"启用成功!"})}).catch(function(){e.$message({type:"info",message:"已取消启用"})})},stop:function(t){var e=this;this.$confirm("是否停用该优惠券？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.status="未开始",e.$message({type:"success",message:"停用成功!"})}).catch(function(){e.$message({type:"info",message:"已取消停用"})})},deleteTicket:function(t){var e=this;this.$confirm("是否删除该优惠券？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var n=e.list.indexOf(t);e.list.splice(n,1),e.$message({type:"success",message:"删除成功!"})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},addTicket:function(){this.list.push(s()({},this.ticketForm)),this.ticketDialogVisible=!1}},filters:{timeFilter:function(t){return t[0]+" ~  "+t[1]}}},o=(n("wJsp"),n("KHd+")),c=Object(o.a)(l,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("el-input",{staticClass:"input-search",attrs:{placeholder:"优惠券名称","prefix-icon":"el-icon-search"},model:{value:t.searchContent,callback:function(e){t.searchContent=e},expression:"searchContent"}}),t._v(" "),n("el-button",{staticClass:"btn-add-car",attrs:{type:"primary"},on:{click:function(e){t.ticketDialogVisible=!0}}},[t._v("创建优惠券")]),t._v(" "),n("el-button",{staticClass:"btn-add-car",attrs:{type:"primary"},on:{click:function(e){t.dialogVisible=!0}}},[t._v("积分设置")]),t._v(" "),n("el-table",{attrs:{data:t.list,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""}},[n("el-table-column",{attrs:{align:"center",label:"ID",width:"95"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.$index+1)+"\n      ")]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"优惠券类型",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.row.type)+"\n      ")]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"优惠券名称",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.row.name)+"\n      ")]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"有效期",align:"center",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(t._f("timeFilter")(e.row.expire)))])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"状态",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",{class:{"font-red":"已过期"===e.row.status,"font-green":"进行中"===e.row.status}},[t._v(t._s(e.row.status))])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"已发数量",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row.sended))])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"未核销数量",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row.unchecked))])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"抵换积分",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row.points))])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"操作",align:"center",width:"300"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{type:"primary"}},[t._v("查看")]),t._v(" "),"未开始"===e.row.status?n("el-button",{attrs:{type:"success"},on:{click:function(n){t.start(e.row)}}},[t._v("启用")]):t._e(),t._v(" "),"进行中"===e.row.status?n("el-button",{attrs:{type:"warning"},on:{click:function(n){t.stop(e.row)}}},[t._v("停用")]):t._e(),t._v(" "),n("el-button",{attrs:{type:"danger"},on:{click:function(n){t.deleteTicket(e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),n("el-dialog",{attrs:{title:"积分设置",visible:t.dialogVisible,width:"30%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[t._v("\n\n    每消费"),n("el-input",{staticStyle:{width:"80px",margin:"5px"},model:{value:t.transform,callback:function(e){t.transform=e},expression:"transform"}}),t._v("元可抵换 1 积分\n\n    "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dialogVisible=!1}}},[t._v("确 定")])],1)],1),t._v(" "),n("el-dialog",{attrs:{title:"优惠券创建",visible:t.ticketDialogVisible,width:"40%"},on:{"update:visible":function(e){t.ticketDialogVisible=e}}},[n("el-form",{staticClass:"demo-form-inline",attrs:{inline:!1,model:t.ticketForm,"label-width":"100px"}},[n("el-form-item",{attrs:{label:"优惠券类型"}},[n("el-select",{attrs:{placeholder:"请选择"},model:{value:t.ticketForm.type,callback:function(e){t.$set(t.ticketForm,"type",e)},expression:"ticketForm.type"}},t._l(t.options,function(t){return n("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),n("el-form-item",{staticStyle:{width:"300px"},attrs:{label:"优惠券名称"}},[n("el-input",{model:{value:t.ticketForm.name,callback:function(e){t.$set(t.ticketForm,"name",e)},expression:"ticketForm.name"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"数量"}},[n("el-input-number",{attrs:{step:10},model:{value:t.ticketForm.unchecked,callback:function(e){t.$set(t.ticketForm,"unchecked",e)},expression:"ticketForm.unchecked"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"抵用积分"}},[n("el-input-number",{attrs:{step:5},model:{value:t.ticketForm.points,callback:function(e){t.$set(t.ticketForm,"points",e)},expression:"ticketForm.points"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"有效期"}},[n("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd"},model:{value:t.ticketForm.expire,callback:function(e){t.$set(t.ticketForm,"expire",e)},expression:"ticketForm.expire"}})],1)],1),t._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:t.addTicket}},[t._v("确 定")])],1)],1)],1)},[],!1,null,"159d61a0",null);c.options.__file="index.vue";e.default=c.exports},LPhk:function(t,e,n){},rY9o:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var i=n("t3Un");function s(t){return Object(i.a)({url:"/table/list",method:"get",params:t})}},wJsp:function(t,e,n){"use strict";var i=n("LPhk");n.n(i).a}}]);